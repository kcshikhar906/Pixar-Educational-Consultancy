
rules_version = '2';

service cloud.firestore {
  match /databases/pixareducation/documents {

    // Rules for the 'students' collection
    // Allow authenticated users (admins) to read and write student documents.
    match /students/{studentId} {
      allow read, write: if request.auth != null;
    }

    // Rules for the 'metrics' collection
    // Allow authenticated users (admins) to read the dashboard metrics.
    // Disallow client-side writes to ensure data is only aggregated by the backend function.
    match /metrics/{docId} {
      allow read: if request.auth != null;
      allow write: if false;
    }
  }
}
